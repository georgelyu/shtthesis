\chapter{自动化的流体仿真框架}
\label{sec:sig23}

% Sec 4.1
\section{背景与动机}
我们已经描述了应用于CG上的LBM方法，但是对于工业应用来说，以上的方法完全无法满足。在工业领域中，更多注重XXXXXX，风洞测试用的更多。在这一章中我们将介绍一个基于LBM的虚拟风洞测试系统，以克服这一问题。

\paragraph{风洞与虚拟风洞}
虽然汽车行业在早期，并不注重空气动力学的影响，许多汽车的造型都以方正和硬朗为特点，但随着汽车越来越注重经济性，尤其是现在进入电动汽车的时代后，空气动力学对汽车造型的设计影响越来越显著。从20世纪早期开始，航空工程师开始使用风洞来测试飞机，之后汽车的设计制造也开始使用类似的技术。随后更多的领域开始使用风洞测试进行空气动力学特性的测试，如高层建筑物、高速列车、船舰等的设计。虽然风洞实验对产品设计有着很强的指导意义，但是真实的风洞实验需要进行实际的物理建模，并且风洞本身的造价也十分高昂。这样的高成本与操作难度，使其难以被频繁应用。在计算机得以发展后，虚拟风洞随即出现，并成为一种更简单、高效、节约成本的气动设计解决方案。同时虚拟风洞可以更直观地提供可视化结果，如表面的高压与低压区分布、不同位置的气流的涡流程度等。这些数据可以在设计的迭代中节约大量的时间与经济成本。直到今天，虚拟风洞的效率依然深刻影响汽车、建筑、航空航天等领域的产品研发周期~\cite{HighriseBuildings,windScience}。

\paragraph{虚拟风洞的现状}
对于最常见的亚声速弱可压情况 (马赫数小于0.3时，此时流体依然可以用不可压模型进行近似描述)，目前的虚拟风洞测试需要经过一个非常耗时的前处理阶段。最耗时的部分是基于物体模型构建贴体的计算网格，这一过程需要大量的人工调整，以保证网格质量。构建好计算网格后，使用基于有限体积或有限元的CFD求解器，来求解流体。即使在CPU集群上，进行这样的流体求解也可能需要数天才可完成一次仿真。在GPU平台上，使用现有软件，如西门子StarCCM+~\cite{Siemens}，进行瞬态流求解，也是类似的效率。所以更多时候，在现有的虚拟风洞实验中会进行稳态求解，以节省计算时间。

\paragraph{使用LBM进行气动分析}
近些年来，LBM在进行高效湍流仿真上，已经取得了长足的进步。LBM在核心算法上的进展已经使其有能力在大规模并行结构上高效求解流体，并达到满足工业应用的精度范围~\cite{Li-2020,Lallemand:2021}。这使得LBM开始在CFD领域成为传统方法之外的一个新的选项 (我们注意到现有的工业软件，如PowerFLOW与XFlow~\cite{Simulia}均基于LBM开发，但其具体使用的方法模型并不明确)。在CG领域，虽然有LBM方法得到了较好的视觉结果~\cite{Li-2020,Lyu:2021}，但其精度依然远比不上工业应用所需的精度。

\paragraph{我们的工作}
我们尝试通过解决一些LBM中的关键问题，提升LBM的整体能力，使得LBM可以成为一个统一的流体仿真框架，以应用到视觉特效、工业设计等多个领域。通过提升碰撞模型、边界处理的精度，结合多分辨率网格与GPU优化，我们构建了一个虚拟的亚声速弱可压风洞测试系统。该系统可以拥有与现有的CFD商业软件相似、甚至更高的精度与计算效率。

% Sec 4.2
\section{方法}
我们的系统相比于现有的LBM主要包含以下四个方面的改进：
\begin{itemize}
	\item 我们对累积量碰撞模型，通过局部熵值的最大化的原则进行了改进。改进后的碰撞模型在精度上有所提升，并可在$10^8$级别的雷诺数下保持稳定； 
	\item 我们提出了一个新的单点插值反弹边界来处理静态与动态物体边界，可以更精准地求解边界层流场；
	\item 我们提出了一个多分辨率网格构建算法，以自动且灵活地构建多分辨率网格，可以在不需花费过多人工前处理的情况下，完成高分辨率流体仿真
	\item 我们还提出了一系列的GPU优化，进一步提升运算效率。
\end{itemize}

